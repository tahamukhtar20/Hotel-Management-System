{% extends "base.html" %}
{% block head %}
    <title>Login Page</title>
{% endblock %}
{% block body %}
    <section>
        <form class="m-5 mt-5 mb-5 mx-auto " style="width: 45%;">
            <div class="form-group pt-5 mt-5">
                <label for="InputEmail">Email address</label>
                <input type="email" class="form-control" id="InputEmailAdmin" aria-describedby="emailHelp"
                       placeholder="Enter email">
            </div>
            <div class="form-group">
                <label for="InputPassword">Password</label>
                <input type="password" class="form-control" id="InputPasswordAdmin" placeholder="Password">
            </div>
            <div class="form-group form-check mt-2 justify-content-start d-flex">
                <input type="checkbox" class="form-check-input d-inline" id="exampleCheck2">
                <label class="form-check-label d-inline" style="margin-left:30px" for="exampleCheck1Admin">Show
                    Password</label>
            </div>
            <button type="button" id="admin_submit"
                    class="btn submission dropbtn rounded-2 btn-outline-light btn1 effect01"
            >Submit
            </button>
        </form>
    </section>
    <script>document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("admin_submit").addEventListener('click', admin_panel)
    })


    function admin_panel() {
        let Email = document.getElementById("InputEmailAdmin")
        let Password = document.getElementById("InputPasswordAdmin")
        if (Email.value === "" || Password.value === "") {
            alert("Please fill all the fields")
        } else if (Password.value.length < 6) {
            alert("Password must be atleast 6 characters long")
        } else {
            fetch("/admin_verification", {
                method: "POST", headers: {
                    "Content-Type": "application/json"
                }, body: JSON.stringify({
                    "Email": Email.value, "Password": Password.value
                })
            }).then(response => {
                if (response.status === 200) {
                    alert("Logged in successfully")
                    window.location = response.url;
                }
                return response.json();
            });
        }
    }

    $(document).ready(() => {
        $("#exampleCheck2").click(() => {
            let password = $("#InputPasswordAdmin");
            if (password.attr("type") === "password") {
                password.attr("type", "text");
            } else {
                password.attr("type", "password");
            }
        });
    });</script>
{% endblock %}
